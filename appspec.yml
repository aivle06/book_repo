version: 0.0
os: linux

files:
  - source: build/libs/app.jar
    destination: /opt/bookapp

permissions:
  - object: /opt/bookapp/app.jar
    owner: bookapp
    group: bookapp
    mode: 500

hooks:
  ApplicationStop:
    - location: scripts/stop.sh
      timeout: 300
      runas: root

  # ✅ 수정됨: 파일을 복사하기 "전"에 유저와 Java 등 환경을 준비합니다.
  BeforeInstall:
    - location: scripts/install.sh
      timeout: 300
      runas: root

  ApplicationStart:
    - location: scripts/start.sh
      timeout: 300
      runas: root